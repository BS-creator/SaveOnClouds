/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/jQuery-QueryBuilder@2.5.2/src/plugins/sortable/plugin.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function moveSortableToTarget(e,r,t){var o,l,n=QueryBuilder.selectors;(o=r.closest(n.rule_container)).length&&(l="moveAfter"),l||(o=r.closest(n.group_header)).length&&(o=r.closest(n.group_container),l="moveAtBegin"),l||(o=r.closest(n.group_container)).length&&(l="moveAtEnd"),l&&(e[l](t.getModel(o)),t&&e instanceof Rule&&t.setRuleInputValue(e,e.value))}QueryBuilder.define("sortable",function(e){var r,t,o,l;"interact"in window||Utils.error("MissingLibrary",'interact.js is required to use "sortable" plugin. Get it here: http://interactjs.io'),void 0!==e.default_no_sortable&&(Utils.error(!1,"Config",'Sortable plugin : "default_no_sortable" options is deprecated, use standard "default_rule_flags" and "default_group_flags" instead'),this.settings.default_rule_flags.no_sortable=this.settings.default_group_flags.no_sortable=e.default_no_sortable),interact.dynamicDrop(!0),interact.pointerMoveTolerance(10),this.on("afterAddRule afterAddGroup",function(n,a){if(a!=r){var i=n.builder;e.inherit_no_sortable&&a.parent&&a.parent.flags.no_sortable&&(a.flags.no_sortable=!0),e.inherit_no_drop&&a.parent&&a.parent.flags.no_drop&&(a.flags.no_drop=!0),a.flags.no_sortable||interact(a.$el[0]).draggable({allowFrom:QueryBuilder.selectors.drag_handle,onstart:function(e){l=!1,o=i.getModel(e.target),t=o.$el.clone().appendTo(o.$el.parent()).width(o.$el.outerWidth()).addClass("dragging");var n=$('<div class="rule-placeholder">&nbsp;</div>').height(o.$el.outerHeight());r=o.parent.addRule(n,o.getPos()),o.$el.hide()},onmove:function(e){t[0].style.top=e.clientY-15+"px",t[0].style.left=e.clientX-15+"px"},onend:function(e){e.dropzone&&(moveSortableToTarget(o,$(e.relatedTarget),i),l=!0),t.remove(),t=void 0,r.drop(),r=void 0,o.$el.css("display",""),i.trigger("afterMove",o),i.trigger("rulesChanged")}}),a.flags.no_drop||(interact(a.$el[0]).dropzone({accept:QueryBuilder.selectors.rule_and_group_containers,ondragenter:function(e){moveSortableToTarget(r,$(e.target),i)},ondrop:function(e){l||moveSortableToTarget(o,$(e.target),i)}}),a instanceof Group&&interact(a.$el.find(QueryBuilder.selectors.group_header)[0]).dropzone({accept:QueryBuilder.selectors.rule_and_group_containers,ondragenter:function(e){moveSortableToTarget(r,$(e.target),i)},ondrop:function(e){l||moveSortableToTarget(o,$(e.target),i)}}))}}),this.on("beforeDeleteRule beforeDeleteGroup",function(e,r){e.isDefaultPrevented()||(interact(r.$el[0]).unset(),r instanceof Group&&interact(r.$el.find(QueryBuilder.selectors.group_header)[0]).unset())}),this.on("afterApplyRuleFlags afterApplyGroupFlags",function(e,r){r.flags.no_sortable&&r.$el.find(".drag-handle").remove()}),e.disable_template||(this.on("getGroupTemplate.filter",function(r,t){if(t>1){var o=$(r.value);o.find(QueryBuilder.selectors.condition_container).after('<div class="drag-handle"><i class="'+e.icon+'"></i></div>'),r.value=o.prop("outerHTML")}}),this.on("getRuleTemplate.filter",function(r){var t=$(r.value);t.find(QueryBuilder.selectors.rule_header).after('<div class="drag-handle"><i class="'+e.icon+'"></i></div>'),r.value=t.prop("outerHTML")}))},{inherit_no_sortable:!0,inherit_no_drop:!0,icon:"glyphicon glyphicon-sort",disable_template:!1}),QueryBuilder.selectors.rule_and_group_containers=QueryBuilder.selectors.rule_container+", "+QueryBuilder.selectors.group_container,QueryBuilder.selectors.drag_handle=".drag-handle",QueryBuilder.defaults({default_rule_flags:{no_sortable:!1,no_drop:!1},default_group_flags:{no_sortable:!1,no_drop:!1}});
//# sourceMappingURL=/sm/cb4ab79486350225e94d85221f209017c8c1e4e02160c82b109bbd3bbaf72030.map