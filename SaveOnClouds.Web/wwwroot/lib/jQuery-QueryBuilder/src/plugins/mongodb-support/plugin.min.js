/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/jQuery-QueryBuilder@2.5.2/src/plugins/mongodb-support/plugin.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
QueryBuilder.defaults({mongoOperators:{equal:function(n){return n[0]},not_equal:function(n){return{$ne:n[0]}},in:function(n){return{$in:n}},not_in:function(n){return{$nin:n}},less:function(n){return{$lt:n[0]}},less_or_equal:function(n){return{$lte:n[0]}},greater:function(n){return{$gt:n[0]}},greater_or_equal:function(n){return{$gte:n[0]}},between:function(n){return{$gte:n[0],$lte:n[1]}},not_between:function(n){return{$lt:n[0],$gt:n[1]}},begins_with:function(n){return{$regex:"^"+Utils.escapeRegExp(n[0])}},not_begins_with:function(n){return{$regex:"^(?!"+Utils.escapeRegExp(n[0])+")"}},contains:function(n){return{$regex:Utils.escapeRegExp(n[0])}},not_contains:function(n){return{$regex:"^((?!"+Utils.escapeRegExp(n[0])+").)*$",$options:"s"}},ends_with:function(n){return{$regex:Utils.escapeRegExp(n[0])+"$"}},not_ends_with:function(n){return{$regex:"(?<!"+Utils.escapeRegExp(n[0])+")$"}},is_empty:function(n){return""},is_not_empty:function(n){return{$ne:""}},is_null:function(n){return null},is_not_null:function(n){return{$ne:null}}},mongoRuleOperators:{$eq:function(n){return{val:n,op:null===n?"is_null":""===n?"is_empty":"equal"}},$ne:function(n){return{val:n=n.$ne,op:null===n?"is_not_null":""===n?"is_not_empty":"not_equal"}},$regex:function(n){return"^(?!"==(n=n.$regex).slice(0,4)&&")"==n.slice(-1)?{val:n.slice(4,-1),op:"not_begins_with"}:"^((?!"==n.slice(0,5)&&").)*$"==n.slice(-5)?{val:n.slice(5,-5),op:"not_contains"}:"(?<!"==n.slice(0,4)&&")$"==n.slice(-2)?{val:n.slice(4,-2),op:"not_ends_with"}:"$"==n.slice(-1)?{val:n.slice(0,-1),op:"ends_with"}:"^"==n.slice(0,1)?{val:n.slice(1),op:"begins_with"}:{val:n,op:"contains"}},between:function(n){return{val:[n.$gte,n.$lte],op:"between"}},not_between:function(n){return{val:[n.$lt,n.$gt],op:"not_between"}},$in:function(n){return{val:n.$in,op:"in"}},$nin:function(n){return{val:n.$nin,op:"not_in"}},$lt:function(n){return{val:n.$lt,op:"less"}},$lte:function(n){return{val:n.$lte,op:"less_or_equal"}},$gt:function(n){return{val:n.$gt,op:"greater"}},$gte:function(n){return{val:n.$gte,op:"greater_or_equal"}}}}),QueryBuilder.extend({getMongo:function(n){if(!(n=void 0===n?this.getRules():n))return null;var e=this;return function n(t){if(t.condition||(t.condition=e.settings.default_condition),-1===["AND","OR"].indexOf(t.condition.toUpperCase())&&Utils.error("UndefinedMongoCondition",'Unable to build MongoDB query with condition "{0}"',t.condition),!t.rules)return{};var o=[];t.rules.forEach(function(t){if(t.rules&&t.rules.length>0)o.push(n(t));else{var r=e.settings.mongoOperators[t.operator],i=e.getOperatorByType(t.operator);void 0===r&&Utils.error("UndefinedMongoOperator",'Unknown MongoDB operation for operator "{0}"',t.operator),0!==i.nb_inputs&&(t.value instanceof Array||(t.value=[t.value]));var u={};u[e.change("getMongoDBField",t.field,t)]=r.call(e,t.value),o.push(e.change("ruleToMongo",u,t,t.value,r))}});var r={};return r["$"+t.condition.toLowerCase()]=o,e.change("groupToMongo",r,t)}(n)},getRulesFromMongo:function(n){if(null==n)return null;var e=this;if("rules"in(n=e.change("parseMongoNode",n))&&"condition"in n)return n;if("id"in n&&"operator"in n&&"value"in n)return{condition:this.settings.default_condition,rules:[n]};var t=e.getMongoCondition(n);return t||Utils.error("MongoParse","Invalid MongoDB query format"),function n(t,o){var r=t[o],i=[];return r.forEach(function(t){if("rules"in(t=e.change("parseMongoNode",t))&&"condition"in t)i.push(t);else if("id"in t&&"operator"in t&&"value"in t)i.push(t);else{var o=e.getMongoCondition(t);if(o)i.push(n(t,o));else{var r=Object.keys(t)[0],u=t[r],l=e.getMongoOperator(u);void 0===l&&Utils.error("MongoParse","Invalid MongoDB query format");var s=e.settings.mongoRuleOperators[l];void 0===s&&Utils.error("UndefinedMongoOperator",'JSON Rule operation unknown for operator "{0}"',l);var a=s.call(e,u),g=e.getMongoDBFieldID(r,u),c=e.change("mongoToRule",{id:g,field:r,operator:a.op,value:a.val},t);i.push(c)}}}),e.change("mongoToGroup",{condition:o.replace("$","").toUpperCase(),rules:i},t)}(n,t)},setRulesFromMongo:function(n){this.setRules(this.getRulesFromMongo(n))},getMongoDBFieldID:function(n,e){var t=this.filters.filter(function(e){return e.field===n});return 1===t.length?t[0].id:this.change("getMongoDBFieldID",n,e)},getMongoOperator:function(n){if(null===n||"object"!=typeof n)return"$eq";if(void 0!==n.$gte&&void 0!==n.$lte)return"between";if(void 0!==n.$lt&&void 0!==n.$gt)return"not_between";var e=Object.keys(n).filter(function(n){return!!this.settings.mongoRuleOperators[n]}.bind(this));return 1===e.length?e[0]:void 0},getMongoCondition:function(n){for(var e=Object.keys(n),t=0,o=e.length;t<o;t++)if("$or"===e[t].toLowerCase()||"$and"===e[t].toLowerCase())return e[t]}});
//# sourceMappingURL=/sm/e1bc21449dda22e6a46579c506631412e6e2edd5bd1d29a4a6f69691bbc41b89.map