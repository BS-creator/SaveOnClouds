/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/jQuery-QueryBuilder@2.5.2/src/data.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
QueryBuilder.prototype.validateValue=function(e,t){var r=e.filter.validation||{},a=!0;return a=r.callback?r.callback.call(this,t,e):this._validateValue(e,t),this.change("validateValue",a,t,e)},QueryBuilder.prototype._validateValue=function(e,t){var r,a,i=e.filter,n=e.operator,o=i.validation||{},l=!0;1===e.operator.nb_inputs&&(t=[t]);for(var s=0;s<n.nb_inputs;s++){if(!n.multiple&&$.isArray(t[s])&&t[s].length>1){l=["operator_not_multiple",n.type,this.translate("operators",n.type)];break}switch(i.input){case"radio":if(void 0===t[s]||0===t[s].length){o.allow_empty_value||(l=["radio_empty"]);break}break;case"checkbox":if(void 0===t[s]||0===t[s].length){o.allow_empty_value||(l=["checkbox_empty"]);break}break;case"select":if(void 0===t[s]||0===t[s].length||i.placeholder&&t[s]==i.placeholder_value){o.allow_empty_value||(l=["select_empty"]);break}break;default:a=$.isArray(t[s])?t[s]:[t[s]];for(var u=0;u<a.length;u++){switch(QueryBuilder.types[i.type]){case"string":if(void 0===a[u]||0===a[u].length){o.allow_empty_value||(l=["string_empty"]);break}if(void 0!==o.min&&a[u].length<parseInt(o.min)){l=[this.getValidationMessage(o,"min","string_exceed_min_length"),o.min];break}if(void 0!==o.max&&a[u].length>parseInt(o.max)){l=[this.getValidationMessage(o,"max","string_exceed_max_length"),o.max];break}if(o.format&&("string"==typeof o.format&&(o.format=new RegExp(o.format)),!o.format.test(a[u]))){l=[this.getValidationMessage(o,"format","string_invalid_format"),o.format];break}break;case"number":if(void 0===a[u]||0===a[u].length){o.allow_empty_value||(l=["number_nan"]);break}if(isNaN(a[u])){l=["number_nan"];break}if("integer"==i.type){if(parseInt(a[u])!=a[u]){l=["number_not_integer"];break}}else if(parseFloat(a[u])!=a[u]){l=["number_not_double"];break}if(void 0!==o.min&&a[u]<parseFloat(o.min)){l=[this.getValidationMessage(o,"min","number_exceed_min"),o.min];break}if(void 0!==o.max&&a[u]>parseFloat(o.max)){l=[this.getValidationMessage(o,"max","number_exceed_max"),o.max];break}if(void 0!==o.step&&"any"!==o.step){var p=(a[u]/o.step).toPrecision(14);if(parseInt(p)!=p){l=[this.getValidationMessage(o,"step","number_wrong_step"),o.step];break}}break;case"datetime":if(void 0===a[u]||0===a[u].length){o.allow_empty_value||(l=["datetime_empty"]);break}if(o.format){"moment"in window||Utils.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com");var d=moment(a[u],o.format);if(!d.isValid()){l=[this.getValidationMessage(o,"format","datetime_invalid"),o.format];break}if(o.min&&d<moment(o.min,o.format)){l=[this.getValidationMessage(o,"min","datetime_exceed_min"),o.min];break}if(o.max&&d>moment(o.max,o.format)){l=[this.getValidationMessage(o,"max","datetime_exceed_max"),o.max];break}}break;case"boolean":if(void 0===a[u]||0===a[u].length){o.allow_empty_value||(l=["boolean_not_valid"]);break}if("true"!==(r=(""+a[u]).trim().toLowerCase())&&"false"!==r&&"1"!==r&&"0"!==r&&1!==a[u]&&0!==a[u]){l=["boolean_not_valid"];break}}if(!0!==l)break}}if(!0!==l)break}if(("between"===e.operator.type||"not_between"===e.operator.type)&&2===t.length)switch(QueryBuilder.types[i.type]){case"number":t[0]>t[1]&&(l=["number_between_invalid",t[0],t[1]]);break;case"datetime":o.format&&("moment"in window||Utils.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com"),moment(t[0],o.format).isAfter(moment(t[1],o.format))&&(l=["datetime_between_invalid",t[0],t[1]]))}return l},QueryBuilder.prototype.nextGroupId=function(){return this.status.id+"_group_"+this.status.group_id++},QueryBuilder.prototype.nextRuleId=function(){return this.status.id+"_rule_"+this.status.rule_id++},QueryBuilder.prototype.getOperators=function(e){"string"==typeof e&&(e=this.getFilterById(e));for(var t=[],r=0,a=this.operators.length;r<a;r++){if(e.operators){if(-1==e.operators.indexOf(this.operators[r].type))continue}else if(-1==this.operators[r].apply_to.indexOf(QueryBuilder.types[e.type]))continue;t.push(this.operators[r])}return e.operators&&t.sort(function(t,r){return e.operators.indexOf(t.type)-e.operators.indexOf(r.type)}),this.change("getOperators",t,e)},QueryBuilder.prototype.getFilterById=function(e,t){if("-1"==e)return null;for(var r=0,a=this.filters.length;r<a;r++)if(this.filters[r].id==e)return this.filters[r];return Utils.error(!1!==t,"UndefinedFilter",'Undefined filter "{0}"',e),null},QueryBuilder.prototype.getOperatorByType=function(e,t){if("-1"==e)return null;for(var r=0,a=this.operators.length;r<a;r++)if(this.operators[r].type==e)return this.operators[r];return Utils.error(!1!==t,"UndefinedOperator",'Undefined operator "{0}"',e),null},QueryBuilder.prototype.getRuleInputValue=function(e){var t=e.filter,r=e.operator,a=[];if(t.valueGetter)a=t.valueGetter.call(this,e);else{for(var i=e.$el.find(QueryBuilder.selectors.value_container),n=0;n<r.nb_inputs;n++){var o,l=Utils.escapeElementId(e.id+"_value_"+n);switch(t.input){case"radio":a.push(i.find("[name="+l+"]:checked").val());break;case"checkbox":o=[],i.find("[name="+l+"]:checked").each(function(){o.push($(this).val())}),a.push(o);break;case"select":t.multiple?(o=[],i.find("[name="+l+"] option:selected").each(function(){o.push($(this).val())}),a.push(o)):a.push(i.find("[name="+l+"] option:selected").val());break;default:a.push(i.find("[name="+l+"]").val())}}a=a.map(function(e){return r.multiple&&t.value_separator&&"string"==typeof e&&(e=e.split(t.value_separator)),$.isArray(e)?e.map(function(e){return Utils.changeType(e,t.type)}):Utils.changeType(e,t.type)}),1===r.nb_inputs&&(a=a[0]),t.valueParser&&(a=t.valueParser.call(this,e,a))}return this.change("getRuleValue",a,e)},QueryBuilder.prototype.setRuleInputValue=function(e,t){var r=e.filter,a=e.operator;if(r&&a){if(e._updating_input=!0,r.valueSetter)r.valueSetter.call(this,e,t);else{var i=e.$el.find(QueryBuilder.selectors.value_container);1==a.nb_inputs&&(t=[t]);for(var n=0;n<a.nb_inputs;n++){var o=Utils.escapeElementId(e.id+"_value_"+n);switch(r.input){case"radio":i.find("[name="+o+'][value="'+t[n]+'"]').prop("checked",!0).trigger("change");break;case"checkbox":$.isArray(t[n])||(t[n]=[t[n]]),t[n].forEach(function(e){i.find("[name="+o+'][value="'+e+'"]').prop("checked",!0).trigger("change")});break;default:a.multiple&&r.value_separator&&$.isArray(t[n])&&(t[n]=t[n].join(r.value_separator)),i.find("[name="+o+"]").val(t[n]).trigger("change")}}}e._updating_input=!1}},QueryBuilder.prototype.parseRuleFlags=function(e){var t=$.extend({},this.settings.default_rule_flags);return e.readonly&&$.extend(t,{filter_readonly:!0,operator_readonly:!0,value_readonly:!0,no_delete:!0}),e.flags&&$.extend(t,e.flags),this.change("parseRuleFlags",t,e)},QueryBuilder.prototype.getRuleFlags=function(e,t){if(t)return $.extend({},e);var r={};return $.each(this.settings.default_rule_flags,function(t,a){e[t]!==a&&(r[t]=e[t])}),r},QueryBuilder.prototype.parseGroupFlags=function(e){var t=$.extend({},this.settings.default_group_flags);return e.readonly&&$.extend(t,{condition_readonly:!0,no_add_rule:!0,no_add_group:!0,no_delete:!0}),e.flags&&$.extend(t,e.flags),this.change("parseGroupFlags",t,e)},QueryBuilder.prototype.getGroupFlags=function(e,t){if(t)return $.extend({},e);var r={};return $.each(this.settings.default_group_flags,function(t,a){e[t]!==a&&(r[t]=e[t])}),r},QueryBuilder.prototype.translate=function(e,t){var r;return t||(t=e,e=void 0),r="object"==typeof t?t[this.settings.lang_code]||t.en:(e?this.lang[e]:this.lang)[t]||t,this.change("translate",r,t,e)},QueryBuilder.prototype.getValidationMessage=function(e,t,r){return e.messages&&e.messages[t]||r};
//# sourceMappingURL=/sm/5238b84124f32f39b913a465b5389f9190446f68662cd3dbf25f7f2a929ba65e.map